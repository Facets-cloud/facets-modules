intent: dynamodb
flavor: default
version: '0.2'
description: Adds dynamodb - default flavor
clouds:
  - aws
spec:
  type: object
  title: AWS DynamoDB 
  description: Specification of the AWS DynamoDB table resource intent
  required:
    - hash_key
  properties:
    hash_key:
      type: string
      title: Hash Key (Partition Key)
      description: The attribute name to use as the hash (partition) key for the table
      default: id
    range_key:
      type: string
      title: Range Key (Sort Key)
      description: Optional attribute name to use as the range (sort) key for the table
    billing_mode:
      type: string
      title: Billing Mode
      description: Controls how you are charged for read and write throughput
      enum:
        - PAY_PER_REQUEST
        - PROVISIONED
      default: PAY_PER_REQUEST
    point_in_time_recovery_enabled:
      type: boolean
      title: Point-in-Time Recovery
      description: Enable point-in-time recovery for continuous backups
      default: false
    server_side_encryption_enabled:
      type: boolean
      title: Server-Side Encryption
      description: Enable server-side encryption for data at rest
      default: false
    tags:
      type: object
      description: Tags to apply to the DynamoDB table
      additionalProperties:
        type: string

sample:
  kind: dynamodb
  flavor: default
  $schema: https://facets-cloud.github.io/facets-schemas/schemas/dynamodb/dynamodb.schema.json
  disabled: false
  version: '0.2'
  metadata:
    tags:
      Environment: dev
      Project: example
  spec:
    hash_key: LockID
    range_key: Timestamp
    billing_mode: PAY_PER_REQUEST
    point_in_time_recovery_enabled: true
    server_side_encryption_enabled: true
    tags:
      Name: example-dynamodb-table
      Team: ops
