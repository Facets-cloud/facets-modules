intent: cloud_account
flavor: aws
version: "0.2"
clouds: [ aws ]
description: A cloud account is a user account used to access and manage services provided by a cloud computing service provider.
spec:
  title: Cloud Account
  description: Specifications of AWS cloud account.
  type: object
  properties:
    region:
      title: Region
      description: Geographically distinct location with one or more data centers. Determine where the data is stored and where computing resources will run.
      type: string
      x-ui-placeholder: "Eg: us-east-1"
      x-ui-overrides-only: true
    role_arn:
      title: Role ARN
      description: The Amazon Resource Name (ARN) of the role to assume.
      type: string
      pattern: '^(arn:aws:iam::(\d{12}|aws):role\/[A-Za-z0-9+=,.@\-_]+$' # regex pattern for role ARN
      x-ui-placeholder: 'Eg: arn:aws:iam::123456789012:role/role_name' # placeholder for the role ARN
      x-ui-error-message: 'Value did not match pattern "^(arn:aws:iam::(\d{12}|aws):role\/[A-Za-z0-9+=,.@\-_]+". Eg: arn:aws:iam::123456789012:role/role_name'
      x-ui-override-disable: true # disables the override option in UI
    role_session_name:
      title: Role Session Name
      description: The identifier for the assumed role session. Used to to uniquely identify a session when the same role is assumed by different principals or for different reasons.
      type: string
      pattern: '^[\w+=,.@-]+$' # regex pattern for role session name
      minLength: 2 # minimum length for role session name
      maxLength: 27 # maximum length for role session name
      x-ui-placeholder: "Eg: session_name" # placeholder for the role session name
      x-ui-error-message: 'Value did not match pattern "^[\w+=,.@-]+$" or length must be >=2 and <=27 characters. Eg: session_name'
      x-ui-override-disable: true # disables the override option in UI
    external_id:
      title: External Id
      description: The unique identifier required to assume a role in another account.
      type: string
      pattern: '^[\w+=,.@-]+$' # regex pattern for external id
      minLength: 2 # minimum length for external id
      maxLength: 1224 # maximum length for external id
      x-ui-placeholder: "Eg: external_id" # placeholder for the external id
      x-ui-error-message: 'Value did not match pattern "^[\w+=,.@-]+$" or length must be >=2 and <=1224 characters. Eg: external_id'
      x-ui-secret-ref: true
      x-ui-typeable: true # allows the user to type in a value if not present in dropdown
  required:
  - region
  - role_arn
  - role_session_name
  - external_id
outputs:
  default:
    type: "@outputs/cloud_account"
    providers:
      aws:
        source: hashicorp/aws
        version: "= 3.74.0"
        attributes:
          region: attributes.aws_region
          skip_region_validation: true
          attributes:
            assume_role:
              role_arn: attributes.aws_iam_role
              session_name: attributes.session_name
              external_id: attributes.external_id
      aws4:
        source: hashicorp/aws4
        version: "= 4.53.0"
        attributes:
          region: attributes.aws_region
          skip_region_validation: true
          attributes:
            assume_role:
              role_arn: attributes.aws_iam_role
              session_name: attributes.session_name
              external_id: attributes.external_id
      aws5:
        source: hashicorp/aws5
        version: "= 5.49.0"
        attributes:
          region: attributes.aws_region
          skip_region_validation: true
          attributes:
            assume_role:
              role_arn: attributes.aws_iam_role
              session_name: attributes.session_name
              external_id: attributes.external_id
sample:
  kind: cloud_account
  flavor: aws
  version: "0.2"
  disabled: true # always set this to true to disable the sample
  spec:
    region: "" # dont set any value as this is a sample
    role_arn: ""
    role_session_name: ""
    external_id: ""
