intent: network
flavor: aws_vpc_ex_nat
version: '0.3'
description: Adds network - AWS VPC flavor with extended NAT gateway support
clouds:
- aws
outputs:
  default:
    type: '@outputs/aws_vpc'
spec:
  title: network
  description: Specification of the network for aws vpc flavor with extended NAT gateway
    support
  type: object
  properties:
    choose_vpc_type:
      title: Choose VPC Type
      description: Choose the type of vpc to create
      type: string
      enum:
      - create_new_vpc
      - use_existing_vpc
      default: create_new_vpc
      x-ui-type: radio
      x-ui-immutable: true
      x-ui-overrides-only: true
    azs:
      title: Availability Zones
      description: Availability zones for the vpc
      type: array
      x-ui-placeholder: e.g. us-east-1a us-east-1b
      x-ui-immutable: true
      x-ui-overrides-only: true
      x-ui-fetch-az: true
      items:
        type: string
    vpc_cidr:
      title: VPC CIDR
      description: CIDR block for the vpc
      x-ui-placeholder: e.g. 10.45.0.0/16
      pattern: ^(10.(\d{1,3}.){2}\d{1,3}/(2[0-8]|[89]|1[0-9])|172.(1[6-9]|2[0-9]|3[01]).(\d{1,3}.){1}\d{1,3}/(2[0-8]|[12][0-9])|192.168.(\d{1,3}.){1}\d{1,3}/(2[0-8]|[12][0-9]|1[6-9]))$
      x-ui-error-message: The provided CIDR block is invalid. Please ensure it is
        a valid private IP range in CIDR notation
      type: string
      x-ui-immutable: true
      x-ui-overrides-only: true
    enable_multi_az:
      title: Enable Multi AZ
      description: Enable multi availability zone network
      type: boolean
      x-ui-immutable: true
      x-ui-overrides-only: true
    existing_vpc_id:
      title: Existing VPC ID
      description: To setup network components in an existing vpc
      type: string
      x-ui-visible-if:
        field: spec.choose_vpc_type
        values:
        - use_existing_vpc
      x-ui-immutable: true
      x-ui-overrides-only: true
    use_existing_nat_gateways:
      title: Use Existing NAT Gateways
      description: Whether to use existing NAT gateways instead of creating new ones
      type: boolean
      default: false
      x-ui-immutable: true
      x-ui-overrides-only: true
    existing_nat_gateway_ids:
      title: Existing NAT Gateway IDs
      description: List of existing NAT Gateway IDs to use
      type: array
      x-ui-placeholder: e.g. nat-12345, nat-67890
      x-ui-visible-if:
        field: spec.use_existing_nat_gateways
        values:
        - true
      x-ui-immutable: true
      x-ui-overrides-only: true
      items:
        type: string
  required:
  - azs
  - vpc_cidr
  - existing_vpc_id
  x-ui-order:
  - choose_vpc_type
  - existing_vpc_id
  - use_existing_nat_gateways
  - existing_nat_gateway_ids
  - azs
  - vpc_cidr
  - enable_multi_az
sample:
  kind: network
  flavor: aws_vpc_ex_nat
  version: '0.3'
  lifecycle: ENVIRONMENT_NO_DEPS
  disabled: true
  depends_on: []
  metadata: {}
  spec: {}
