intent: mysql
flavor: cloudsql
version: '0.1'
clouds:
  - gcp
spec:
  title: CloudSQL
  type: object
  properties:
    mysql_version:
      type: string
      title: MySQL Version
      description: MySQL version e.g., 8.0
      minLength: 1
      x-ui-placeholder: "e.g. 8.0"
      x-ui-error-message: "MySQL Version is required."
    size:
      type: object
      title: Size
      description: Writer and reader datastore sizing
      properties:
        reader:
          type: object
          title: Reader
          description: Reader node configuration
          properties:
            instance:
              type: string
              title: Instance Type
              description: Type of instance for reader
              enum:
                - db-f1-micro
                - db-g1-small
                - db-n1-standard-1
                - db-n1-standard-2
                - db-n1-standard-4
                - db-n1-standard-8
                - db-n1-standard-16
                - db-n1-standard-32
                - db-n1-standard-64
                - db-n1-highmem-2
                - db-n1-highmem-4
                - db-n1-highmem-8
                - db-n1-highmem-16
                - db-n1-highmem-32
                - db-n1-highmem-64
                - db-n1-highcpu-2
                - db-n1-highcpu-4
                - db-n1-highcpu-8
                - db-n1-highcpu-16
                - db-n1-highcpu-32
                - db-n1-highcpu-64
                - db-custom-1-3840
                - db-custom-2-7680
                - db-custom-4-15360
                - db-custom-8-30720
                - db-custom-16-61440
                - db-custom-32-122880
              x-ui-placeholder: "Select reader instance type"
              x-ui-error-message: "Instance type for reader is required."
            volume:
              type: string
              title: Volume
              description: Volume size for reader
              pattern: "^[0-9]+(\\.[0-9]+)?[EiKMGTP]i?"
              x-ui-placeholder: "Specify reader volume size"
              x-ui-error-message: "Volume size for reader is required."
            instance_count:
              type: integer
              title: Instance Count
              description: Number of reader instances
              minimum: 1
              x-ui-placeholder: "Enter reader instance count"
              x-ui-error-message: "Instance count for reader is required."
          required:
            - instance
            - volume
            - instance_count
        writer:
          type: object
          title: Writer
          description: Writer node configuration
          properties:
            instance:
              type: string
              title: Instance Type
              description: Type of instance for writer
              enum:
                - db-f1-micro
                - db-g1-small
                - db-n1-standard-1
                - db-n1-standard-2
                - db-n1-standard-4
                - db-n1-standard-8
                - db-n1-standard-16
                - db-n1-standard-32
                - db-n1-standard-64
                - db-n1-highmem-2
                - db-n1-highmem-4
                - db-n1-highmem-8
                - db-n1-highmem-16
                - db-n1-highmem-32
                - db-n1-highmem-64
                - db-n1-highcpu-2
                - db-n1-highcpu-4
                - db-n1-highcpu-8
                - db-n1-highcpu-16
                - db-n1-highcpu-32
                - db-n1-highcpu-64
                - db-custom-1-3840
                - db-custom-2-7680
                - db-custom-4-15360
                - db-custom-8-30720
                - db-custom-16-61440
                - db-custom-32-122880
              x-ui-placeholder: "Select writer instance type"
              x-ui-error-message: "Instance type for writer is required."
            volume:
              type: string
              title: Volume
              description: Volume size for writer
              pattern: "^[0-9]+(\\.[0-9]+)?[EiKMGTP]i?"
              x-ui-placeholder: "Specify writer volume size"
              x-ui-error-message: "Volume size for writer is required."
          required:
            - instance
            - volume
  required:
    - size
    - mysql_version
  x-ui-order:
    - mysql_version
    - size
  x-ui-error-message: "Please provide required information for the size."
sample:
  $schema: 'https://facets-cloud.github.io/facets-schemas/schemas/mysql/mysql.schema.json'
  kind: mysql
  flavor: cloudsql
  version: '0.1'
  disabled: true
  metadata:
    tags:
      managed-by: facets
  spec:
    mysql_version: '8.0'
    size:
      writer:
        instance: db-f1-micro
        volume: 10G
